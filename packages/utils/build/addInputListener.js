!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).addInputListener=n()}(this,function(){"use strict";var r=Object.prototype.toString,c=function(t){return t.replace(/\s+(.)/g,function(t,n){return n.toUpperCase()})};function f(t,n){var e=1<arguments.length&&void 0!==n?n:"";if(arguments.length<2||!e)return!1;var o=r.call(t),i=e.trim(),u=i.slice(0,1).toUpperCase()+c(i.slice(1));return o==="[object ".concat(u,"]")}function p(t,n,e){document.addEventListener&&t.addEventListener(n,e,!1)}var a=["text","textarea"],l="undefined"!=typeof Symbol?Symbol("bindTypingOn"):"__bindTypingOn__";return function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length?arguments[2]:void 0;if(!function(t){if(!t||1!==t.nodeType)return;var n=t.type;a.some(function(t){return t===n})}(t),function(t){0!==arguments.length&&void 0!==t&&f(t,"boolean")}(n),function(t){var n=!0;if((!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&(n=null!==t),!(n=n&&f(t,"object")))return;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);Object.getPrototypeOf(t)}(i),!t[l])if(t[l]=!0,n){var u,r=!1,c=!0,e=function(t){return function(t,n,e){var o=2<arguments.length&&void 0!==e?e:null;(r||c)&&(u!==n&&(null!=i&&i.onInput&&i.onInput(n,o),u=n),c=!0)}(t.type,t.target.value,t)},o=function(t){"compositionend"===t.type?(r=!0,e(t)):(r=!1,"compositionstart"===t.type&&(c=!1))};p(t,"change",e),p(t,"keyup",e),p(t,"mouseup",e),p(t,"paste",function(t){setTimeout(function(){e(t)},0)}),p(t,"compositionstart",o),p(t,"compositionupdate",o),p(t,"compositionend",o)}else p(t,"change",function(t){null!=i&&i.onInput&&i.onInput(t.target.value,t)})}});
