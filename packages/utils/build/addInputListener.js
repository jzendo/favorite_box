!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).addInputListener=t()}(this,function(){"use strict";var r=Object.prototype.toString,c=function(n){return n.replace(/\s+(.)/g,function(n,t){return t.toUpperCase()})};function p(n,t){var e=1<arguments.length&&void 0!==t?t:"";if(arguments.length<2||!e)return!1;var o=r.call(n),i=e.trim(),u=i.slice(0,1).toUpperCase()+c(i.slice(1));return o==="[object ".concat(u,"]")}function f(n,t,e){document.addEventListener&&n.addEventListener(t,e,!1)}var a=["text","textarea"],d="undefined"!=typeof Symbol?Symbol("bindTypingOn"):"__bindTypingOn__";return function(n){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length?arguments[2]:void 0;if(!function(n){if(!n||1!==n.nodeType)return;var t=n.type;a.some(function(n){return n===t})}(n),function(n){0!==arguments.length&&void 0!==n&&p(n,"boolean")}(t),function(n){var t=!0;1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||(t=null!==n),t&&p(n,"object")}(i),!n[d])if(n[d]=!0,t){var u,r=!1,c=!0,e=function(n){return function(n,t,e){var o=2<arguments.length&&void 0!==e?e:null;(r||c)&&(u!==t&&(null!=i&&i.onInput&&i.onInput(t,o),u=t),c=!0)}(n.type,n.target.value,n)},o=function(n){"compositionend"===n.type?(r=!0,e(n)):(r=!1,"compositionstart"===n.type&&(c=!1))};f(n,"change",e),f(n,"keyup",e),f(n,"mouseup",e),f(n,"paste",function(n){setTimeout(function(){e(n)},0)}),f(n,"compositionstart",o),f(n,"compositionupdate",o),f(n,"compositionend",o)}else f(n,"change",function(n){null!=i&&i.onInput&&i.onInput(n.target.value,n)})}});
